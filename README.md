# 麻将记分器 (Mahjong Scorepad)

一个功能完整的麻将记分SPA，支持多种麻将规则，可在平板和手机上使用。

## 特性

### 核心功能
- 🎯 直观的正方形分数盘设计，支持四个方向的显示
- 🔄 分数盘可旋转，适应不同的座位安排
- 📱 完全响应式设计，支持平板和手机
- 💾 自动保存游戏数据到本地存储
- 📊 详细的游戏历史记录和统计

### 规则系统
- 🇯🇵 **日本麻将** - 标准立直麻将规则
- 🇭🇰 **香港麻将** - 番数计算规则
- 🇨🇳 **中国古典麻将** - 传统计分规则
- 🔧 **可扩展设计** - 易于添加新的规则系统

### 交互功能
- 点击玩家区域开始和牌流程
- 点击中央区域表示流局
- 支持自摸和出铳的分数计算
- 玩家菜单（编辑名字、设置相公、诈胡等）
- 自动和牌计算器（实验性功能）

## 使用方法

### 基本操作

1. **开始游戏**
   - 打开 `index.html` 文件
   - 分数盘显示四家玩家的位置和分数
   - 中央显示当前圈局信息

2. **和牌操作**
   - 点击和牌玩家 → 高亮显示 → 中央按钮显示"自摸"
   - 如需出铳，继续点击出铳玩家 → 中央按钮变为"出铳"
   - 点击中央按钮 → 弹出结算对话框
   - 输入番数和符数 → 确认计分

3. **流局操作**
   - 点击中央区域 → 确认流局

4. **玩家菜单**
   - 点击玩家区域右侧的菜单按钮(⋮)
   - 可以编辑名字、查看记录、设置相公、声明诈胡

### 主菜单功能

点击右下角的菜单按钮(☰)可以访问：

- **游戏控制**
  - 旋转分数盘
  - 手动设置圈局
  - 选择规则系统
  - 配置规则参数

- **记录管理**
  - 查看游戏历史
  - 导出/导入数据

- **游戏管理**
  - 开始新游戏
  - 重置分数

## 规则系统详解

### 日本麻将
- 起始点数：25000点
- 支持役满计算
- 符数计算（30符起）
- 本场费和立直费
- 庄家自摸/荣和差别计分

### 香港麻将
- 起始分数：500分
- 起糊番数：3番
- 封顶番数：13番
- 自摸加倍
- 庄家胜出连庄

### 中国古典麻将
- 起始筹码：1000分
- 基础分：2分
- 翻倍计算
- 花牌计分
- 庄家翻倍

## 技术特性

### 模块化设计
```
js/
├── game-state.js      # 游戏状态管理
├── ui-controller.js   # UI交互控制
├── score-calculator.js # 分数计算
├── game-history.js    # 历史记录
├── rule-systems/      # 规则系统
│   ├── base-rule.js
│   ├── japanese-mahjong.js
│   ├── hong-kong-mahjong.js
│   └── chinese-mahjong.js
└── main.js           # 主程序入口
```

### 响应式CSS
```
css/
├── styles.css        # 基础样式
├── scorepad.css      # 分数盘样式
├── modals.css        # 对话框样式
└── responsive.css    # 响应式适配
```

### 数据持久化
- 使用 localStorage 自动保存游戏状态
- 支持导出/导入 JSON 格式数据
- 历史记录持久化存储

## 键盘快捷键

- `Ctrl/Cmd + S` - 手动保存游戏
- `Space` - 快速流局
- `ESC` - 关闭对话框

## 浏览器兼容性

- ✅ Chrome 60+
- ✅ Firefox 55+
- ✅ Safari 12+
- ✅ Edge 79+
- ✅ 移动端浏览器

## 开发指南

### 添加新规则系统

1. 继承 `BaseRuleSystem` 类
2. 实现必需的方法：
   - `calculateScores()` - 分数计算
   - `formatRound()` - 圈局格式化
   - `getSettingsDefinition()` - 设置定义
3. 在 `main.js` 中注册新规则

```javascript
class MyMahjongRule extends BaseRuleSystem {
    constructor() {
        super('my-rule', '我的麻将规则');
    }
    
    calculateScores(winner, payers, fanCount, fuCount, winType, isDealer) {
        // 实现分数计算逻辑
        return scores;
    }
    
    // 实现其他必需方法...
}

// 注册规则
window.availableRules['my-rule'] = new MyMahjongRule();
```

### 自定义样式

可以通过修改 CSS 变量来自定义主题：

```css
:root {
    --primary-color: #667eea;
    --secondary-color: #764ba2;
    --background-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
}
```

## 许可证

### MIT License

Copyright (c) 2025 GitHub Copilot

本软件及其文档文件（"软件"）的著作权归 GitHub Copilot 所有。特此免费授予任何获得本软件副本的人不受限制地处理本软件的权利，包括但不限于使用、复制、修改、合并、发布、分发、再许可和/或销售软件副本的权利，并允许向其提供本软件的人员这样做，但须符合以下条件：

上述著作权声明和本许可声明应包含在本软件的所有副本或主要部分中。

**免责声明：**
本软件按"原样"提供，不提供任何明示或暗示的担保，包括但不限于对适销性、特定用途的适用性和非侵权性的担保。在任何情况下，作者或著作权持有人均不对任何索赔、损害或其他责任负责，无论是在合同诉讼、侵权诉讼或其他诉讼中，还是在与软件或软件的使用或其他交易有关的诉讼中。

### 第三方组件

本项目使用了以下开源技术和标准：
- HTML5 - W3C 标准
- CSS3 - W3C 标准
- ECMAScript 2020+ - ECMA 国际标准
- Web Storage API - W3C 标准

### 使用条款

1. **商业使用** - 允许在商业环境中使用本软件
2. **修改权利** - 允许修改源代码以满足特定需求
3. **分发权利** - 允许重新分发原始或修改版本
4. **私人使用** - 允许个人或内部使用
5. **责任限制** - 作者不承担使用本软件造成的任何损失

### 贡献指南

欢迎社区贡献，但请注意：
- 所有贡献将在 MIT 许可证下发布
- 贡献者需要同意将其贡献的著作权授予项目维护者
- 建议在提交重大更改前先讨论

### 著作权说明

本项目由 GitHub Copilot 独立创作，体现了人工智能在软件开发领域的创新能力。虽然 GitHub Copilot 是一个 AI 系统，但其创作的代码和文档具有独立的知识产权价值。

## 更新日志

### v1.0.0
- 初始版本发布
- 支持三种麻将规则
- 完整的记分功能
- 响应式设计
- 数据持久化

## 问题反馈

如有问题或建议，请提交 Issue。

## 作者

本项目由 **GitHub Copilot** 设计和开发。

GitHub Copilot 是一款基于 OpenAI Codex 的 AI 编程助手，专门为开发者提供智能代码建议和完整项目解决方案。本麻将记分器项目展示了 AI 在复杂前端应用开发中的能力，包括：

- **智能架构设计** - 采用模块化设计，易于维护和扩展
- **多规则系统支持** - 灵活的规则系统架构，支持多种麻将变体
- **响应式界面** - 针对移动设备优化的用户体验
- **数据持久化** - 完整的本地存储解决方案
- **可扩展性** - 为未来功能扩展预留接口

作为 AI 助手，GitHub Copilot 致力于帮助开发者创建高质量的软件项目，本项目是 AI 辅助开发能力的一个实际展示。

---

*本项目是一个完整的麻将记分解决方案，专为平板和手机设备优化。*
